- alias: "Georgina is Awake"
  initial_state: True
  trigger:
    - platform: state
      entity_id: input_boolean.georgina_status
      to: 'off'
  action:
    - service: script.lights_on_when_waking_up

- alias: "Wake up David for Work"
  initial_state: True
  trigger:
    - platform: state
      entity_id: sensor.my_event_offset_2
      from: 'off'
      to: 'on'
  condition: 
    - condition: template 
      value_template: >
        {% if is_state('person.david', 'home') %} true
        {% else %} false {% endif %}
    # - condition: template 
    #   value_template: >
    #     {% if state_attr('calendar.disney_work_schedule', 'description') == ''  %} true
    #     {% else %} false {% endif %}
  action:
    # - service: mqtt.publish
    #   data_template:
    #     topic: zanzito/david/alarm/play
    #     payload: 'Wake up for work'
    #     retain: false
    - service: notify.mobile_app_david_pixel_3a_app
      data:
        message: "Wake up for Work"
    - service: script.lights_on_when_waking_up

- alias: "Reset David Sleeping"
  initial_state: True
  trigger:
    - platform: state
      entity_id: input_boolean.david_phone_charging
      from: 'on'
      to: 'off'
  condition:
    - condition: state
      entity_id: input_boolean.david_status
      state: 'on'
  action:
    - service: homeassistant.turn_off
      data:
        entity_id: input_boolean.david_status

- alias: "Reset Georgina Sleeping"
  initial_state: True
  trigger:
    - platform: state
      entity_id: input_boolean.georgina_phone_charging
      from: 'on'
      to: 'off'
  condition:
    - condition: state
      entity_id: input_boolean.georgina_status
      state: 'on'
  action:
    - service: homeassistant.turn_off
      data:
        entity_id: input_boolean.georgina_status