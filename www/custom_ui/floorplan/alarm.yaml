name: Alarm Panel
image: /local/custom_ui/floorplan/alarm.svg
stylesheet: /local/custom_ui/floorplan/alarm.css

rules:
  - name: input_booleans
    entities:
      - input_boolean.david_phone_charging
      - input_boolean.david_status
      - input_boolean.dog
      - input_boolean.georgina_phone_charging
      - input_boolean.georgina_status
      - input_boolean.vacation
    states:
      - state: 'on'
        class: 'button-on'
      - state: 'off'
        class: 'button-off'

  - name: thermostats_temp
    entities:
      - climate.echo
    text_template: '${entity.attributes.current_temperature ? Math.ceil(entity.attributes.current_temperature) + "°": "undefined"}'
    class_template: 'return "static-temp";'

  - name: temp_darksky
    entities:
      - sensor.dark_sky_temperature
    text_template: '${entity.state ? Math.ceil(entity.state) + "°": "undefined"}'
    class_template: 'return "static-temp";'

  - name: temp_round
    entities:
      - sensor.echo_humidity
      - sensor.dark_sky_humidity
      - sensor.bedroom_temperature
      - sensor.echo_temperature
      - sensor.living_room_temperature
      - sensor.office_temperature
    text_template: '${entity.state ? Math.ceil(entity.state) : "undefined"}'
    class_template: 'return "static-temp";'

  - name: text_states
    entities:
      - sensor.last_message
      - sensor.usg_download
      - sensor.usg_upload
    text_template: '${entity.state ? entity.state.replace(/\s{3,}/g,"") : "undefined"}'
    class_template: 'return "static-text";'

  - name: text_percentage
    entities:
      - sensor.processor_use
      - sensor.memory_use_percent
    text_template: '${entity.state ? Math.ceil(entity.state) + "%": "undefined"}'
    class_template: 'return "static-text";'

  - name: text_font_date
    entities:
      - sensor.floorplan_date
    text_template: '${entity.state ? entity.state : "undefined"}'
    class_template: 'return "static-text-date";'

  - name: text_font_time
    entities:
      - sensor.floorplan_time
      - sensor.time
    text_template: '${entity.state ? entity.state : "undefined"}'
    class_template: 'return "static-text-time";'

  - name: Alarm
    entities:
      - input_boolean.alert_mode
    text_template: '${entity.state ? entity.state : "undefined"}'
    states:
      - state: 'on'
        class: 'text-home'
      - state: 'off'
        class: 'text-away'

  - name: Family
    entities:
      - person.david
      - person.georgina
    text_template: '${entity.state ? entity.state.replace("not_home", "away") : "undefined"}'
    states:
      - state: 'home'
        class: 'text-home'
      - state: 'not_home'
        class: 'text-away'

  - name: switches
    entities:
      - switch.foo_screen
      - switch.garage_inside
      - switch.garage_side
      - switch.living_room_keypad_a
      - switch.living_room_keypad_b
      - switch.living_room_keypad_c
      - switch.living_room_keypad_d
      - switch.living_room_keypad_main
      - switch.master_keypad_a
      - switch.master_keypad_b
      - switch.master_keypad_c
      - switch.master_keypad_d
      - switch.master_keypad_main
      - switch.office_keypad_a
      - switch.office_keypad_b
      - switch.office_keypad_c
      - switch.office_keypad_d
      - switch.office_keypad_main
      - switch.patio_lights
      - switch.blueiris_alerts
      - switch.sonoff1
      - switch.sonoff2
    states:
      - state: 'on'
        class: 'switch-on'
      - state: 'off'
        class: 'switch-off'

  - name: fans
    entities:
      - fan.livingroom_ceiling_fan
      - fan.master_ceiling_fan
      - fan.office_ceiling_fan
    states:
      - state: 'on'
        class: 'fan-on'
      - state: 'off'
        class: 'fan-off'

  - name: Lights
    entities:
      - light.dinning_room_switch
      - light.dinning_table_light
      - light.master_ceiling_light
      - light.office_ceiling_light
      - light.bedroomww_d
      - light.bedroomww_g
      - light.dinningroomww
      - light.kitchenww_1
      - light.kitchenww_2
      - light.livingroomww_1
      - light.livingroomww_2
      - light.officews
    states:
      - state: 'on'
        class: 'light-on'
      - state: 'off'
        class: 'light-off'

  - name: Outdoor Lights
    entities:
      - light.backyard_lights
      - light.porchww
      - light.sideyardww
    states:
      - state: 'on'
        class: 'light-on'
      - state: 'off'
        class: 'outdoor-light-off'

  - name: Echo Occupancy
    entities:
      - binary_sensor.echo_occupancy
      - binary_sensor.living_room_occupancy
      - binary_sensor.office_occupancy
      - binary_sensor.bedroom_occupancy
    states:
      - state: 'on'
        class: 'protect-off'
      - state: 'off'
        class: 'protect-on'

  - name: Entry Points
    entities:
      - binary_sensor.slider_door_status
      - binary_sensor.side_door_status
      - binary_sensor.front_door_status
      - binary_sensor.master_window_status
      - binary_sensor.guest_window_status
      - binary_sensor.office_window_status
      - binary_sensor.slider_door_status
      - binary_sensor.front_window_status
      - binary_sensor.livingroom_window_status
    states:
      - state: 'off'
        class: 'window-closed'
      - state: 'on'
        class: 'window-open'

  - name: Presence
    entities:
      - input_boolean.david_status
      - input_boolean.georgina_status
    states:
      - state: 'on'
        class: 'presence-on'
      - state: 'off'
        class: 'presence-off'

  - name: Garage Doors
    entities:
      - cover.large_garage
      - cover.small_garage
    states:
      - state: 'closed'
        class: 'window-closed'
      - state: 'open'
        class: 'window-open'

  # - name: Juicebox
  #   entities:
  #     - sensor.carlojuice_charging_status
  #   states:
  #     - state: 'charging'
  #       class: 'juicebox-charging'
  #     - state: 'standby'
  #       class: 'juicebox-standby'
  #     - state: 'plugged'
  #       class: 'juicebox-plugged'

  - name: Dark Sky Sensors
    entities:
      - sensor.dark_sky_minutely_summary
    image_template: '
      var imageName = "";

      switch (entity.attributes.entity_picture) {
        case "/static/images/darksky/weather-sunny.svg":
          imageName = "sunny-1";
          break;

        case "/static/images/darksky/weather-night.svg":
          imageName = "night-1";
          break;

        case "/static/images/darksky/weather-partlycloudy.svg":
          imageName = "partlycloudy-day-1";
          break;

        case "/static/images/darksky/weather-cloudy.svg":
          imageName = "partlycloudy-night-1";
          break;

        case "/static/images/darksky/weather-cloudy.svg":
          imageName = "cloudy-day-1";
          break;

        case "/static/images/darksky/weather-pouring.svg":
          imageName = "thunder";
          break;

        case "/static/images/darksky/weather-snowy.svg":
          imageName = "snowy-day-1";
          break;
      }

      return "/local/custom_ui/floorplan/images/weather/" + imageName + ".svg";
      '

  - name: Camera Images
    entities:
      - camera.front_door
      - camera.front_yard
      - camera.back_yard
      - camera.motioneye
      - camera.side_yard

    image_template: '${entity.attributes.entity_picture}'
    # image_refresh_interval: 20 # in seconds - Future options if needed.
